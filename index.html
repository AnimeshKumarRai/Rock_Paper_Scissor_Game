<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock Paper Scissors Ultimate</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }
        @keyframes shake {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(5deg); }
            75% { transform: rotate(-5deg); }
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        @keyframes glow {
            0% { box-shadow: 0 0 5px rgba(0,0,0,0.2); }
            50% { box-shadow: 0 0 20px rgba(99, 102, 241, 0.6); }
            100% { box-shadow: 0 0 5px rgba(0,0,0,0.2); }
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes confetti {
            0% { transform: translateY(0) rotate(0deg); opacity: 1; }
            100% { transform: translateY(300px) rotate(720deg); opacity: 0; }
        }
        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-10px) rotate(5deg); }
        }
        @keyframes heartbeat {
            0% { transform: scale(1); }
            20% { transform: scale(1.1); }
            40% { transform: scale(1); }
            60% { transform: scale(1.15); }
            80% { transform: scale(1); }
            100% { transform: scale(1); }
        }
        @keyframes lightning {
            0%, 100% { opacity: 0; }
            10%, 12%, 14%, 16%, 18%, 20% { opacity: 1; }
        }
        @keyframes fire {
            0%, 100% { transform: scale(1) rotate(0deg); opacity: 0.8; }
            50% { transform: scale(1.2) rotate(5deg); opacity: 1; }
        }
        @keyframes ice {
            0%, 100% { transform: scale(1); opacity: 0.8; }
            50% { transform: scale(1.1); opacity: 1; filter: blur(1px); }
        }
        @keyframes earth {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            25% { transform: translateY(-5px) rotate(-2deg); }
            50% { transform: translateY(0) rotate(0deg); }
            75% { transform: translateY(5px) rotate(2deg); }
        }
        .bounce {
            animation: bounce 0.5s infinite;
        }
        .shake {
            animation: shake 0.5s infinite;
        }
        .pulse {
            animation: pulse 1.5s infinite;
        }
        .glow {
            animation: glow 2s infinite;
        }
        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #f0f;
            animation: confetti 3s linear forwards;
        }
        .choice-btn:hover {
            transform: scale(1.1);
            transition: transform 0.2s;
        }
        .result-text {
            text-shadow: 0 0 5px rgba(0,0,0,0.3);
        }
        .streak-fire {
            color: #ff5722;
            text-shadow: 0 0 10px #ff5722;
        }
        .history-item {
            transition: all 0.3s ease;
        }
        .history-item:hover {
            transform: translateX(5px);
        }
        .floating {
            animation: float 3s ease-in-out infinite;
        }
        .heartbeat {
            animation: heartbeat 1.5s ease-in-out infinite;
        }
        .lightning {
            animation: lightning 2s ease-in-out infinite;
        }
        .fire-effect {
            animation: fire 1.5s ease-in-out infinite;
        }
        .ice-effect {
            animation: ice 2s ease-in-out infinite;
        }
        .earth-effect {
            animation: earth 2s ease-in-out infinite;
        }
        .power-bar {
            transition: width 0.5s ease-out;
        }
        .achievement {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            padding: 15px;
            display: flex;
            align-items: center;
            transform: translateX(400px);
            transition: transform 0.5s ease-out;
            z-index: 100;
        }
        .achievement.show {
            transform: translateX(0);
        }
        .theme-transition {
            transition: background 0.5s ease, color 0.5s ease;
        }
        .dark-mode {
            background: linear-gradient(135deg, #1a1a2e, #16213e, #0f3460);
            color: #eee;
        }
        .dark-mode .bg-white {
            background-color: #1e1e2e !important;
        }
        .dark-mode .bg-gray-50 {
            background-color: #2a2a3e !important;
        }
        .dark-mode .text-gray-500 {
            color: #aaa !important;
        }
        .dark-mode .text-gray-600 {
            color: #bbb !important;
        }
        .dark-mode .text-gray-300 {
            color: #ddd !important;
        }
        .dark-mode .text-blue-800 {
            color: #8ab4f8 !important;
        }
        .dark-mode .text-red-800 {
            color: #f28b82 !important;
        }
        .dark-mode .bg-blue-50 {
            background-color: #1e3a5f !important;
        }
        .dark-mode .bg-red-50 {
            background-color: #5f1e1e !important;
        }
        .dark-mode .border-gray-200 {
            border-color: #444 !important;
        }
        .dark-mode .hover\:bg-gray-100:hover {
            background-color: #3a3a4e !important;
        }
        .dark-mode .hover\:bg-gray-300:hover {
            background-color: #4a4a5e !important;
        }
        .dark-mode .bg-gradient-to-r.from-purple-500.to-blue-500 {
            background: linear-gradient(to right, #7e22ce, #3b82f6) !important;
        }
        .dark-mode .bg-gradient-to-br.from-gray-400.to-gray-600 {
            background: linear-gradient(to bottom right, #6b7280, #4b5563) !important;
        }
        .dark-mode .bg-gradient-to-br.from-blue-400.to-blue-600 {
            background: linear-gradient(to bottom right, #60a5fa, #2563eb) !important;
        }
        .dark-mode .bg-gradient-to-br.from-red-400.to-red-600 {
            background: linear-gradient(to bottom right, #f87171, #ef4444) !important;
        }
        .dark-mode .bg-gradient-to-r.from-purple-500.to-blue-500 {
            background: linear-gradient(to right, #8b5cf6, #3b82f6) !important;
        }
        .dark-mode .bg-gray-200 {
            background-color: #4a4a5e !important;
        }
        .dark-mode .text-gray-700 {
            color: #ddd !important;
        }
        .dark-mode .hover\:bg-gray-300:hover {
            background-color: #5a5a6e !important;
        }
        .dark-mode .shadow-xl {
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.5), 0 10px 10px -5px rgba(0, 0, 0, 0.3) !important;
        }
        .dark-mode .shadow-lg {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.4), 0 4px 6px -2px rgba(0, 0, 0, 0.2) !important;
        }
        .dark-mode .hover\:shadow-xl:hover {
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.6), 0 10px 10px -5px rgba(0, 0, 0, 0.4) !important;
        }
        .dark-mode .bg-gradient-to-r.from-green-500.to-teal-500 {
            background: linear-gradient(to right, #10b981, #14b8a6) !important;
        }
        .dark-mode .bg-gradient-to-r.from-yellow-500.to-orange-500 {
            background: linear-gradient(to right, #f59e0b, #f97316) !important;
        }
        .dark-mode .bg-gradient-to-r.from-red-500.to-pink-500 {
            background: linear-gradient(to right, #ef4444, #ec4899) !important;
        }
        .dark-mode .bg-gradient-to-r.from-indigo-500.to-purple-500 {
            background: linear-gradient(to right, #6366f1, #8b5cf6) !important;
        }
        .dark-mode .bg-gradient-to-r.from-gray-500.to-gray-700 {
            background: linear-gradient(to right, #6b7280, #374151) !important;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-100 via-purple-100 to-pink-100 min-h-screen flex flex-col items-center justify-center p-4 theme-transition">
    <!-- Background decoration -->
    <div class="fixed inset-0 overflow-hidden pointer-events-none">
        <div class="absolute -top-40 -right-40 w-80 h-80 bg-purple-300 rounded-full mix-blend-multiply filter blur-xl opacity-30 animate-pulse"></div>
        <div class="absolute -bottom-40 -left-40 w-80 h-80 bg-blue-300 rounded-full mix-blend-multiply filter blur-xl opacity-30 animate-pulse"></div>
        <div class="absolute top-1/3 left-1/4 w-40 h-40 bg-pink-300 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-pulse"></div>
        <div class="absolute bottom-1/3 right-1/4 w-40 h-40 bg-yellow-300 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-pulse"></div>
    </div>
    
    <div class="max-w-2xl w-full bg-white rounded-2xl shadow-xl overflow-hidden relative z-10">
        <!-- Header -->
        <div class="bg-gradient-to-r from-purple-500 to-blue-500 p-6 text-center relative">
            <h1 class="text-4xl font-bold text-white mb-2">Rock Paper Scissors Ultimate</h1>
            <p class="text-blue-100">Make your choice and challenge the computer!</p>
            
            <!-- Game mode selector -->
            <div class="mt-4 flex justify-center space-x-2">
                <button id="classic-mode" class="bg-white bg-opacity-20 text-white px-3 py-1 rounded-full text-sm font-medium hover:bg-opacity-30 transition-all">Classic</button>
                <button id="best-of-mode" class="bg-white bg-opacity-20 text-white px-3 py-1 rounded-full text-sm font-medium hover:bg-opacity-30 transition-all">Best of 5</button>
                <button id="endless-mode" class="bg-white bg-opacity-20 text-white px-3 py-1 rounded-full text-sm font-medium hover:bg-opacity-30 transition-all">Endless</button>
                <button id="battle-mode" class="bg-white bg-opacity-20 text-white px-3 py-1 rounded-full text-sm font-medium hover:bg-opacity-30 transition-all">Battle</button>
            </div>
            
            <!-- Theme toggle -->
            <button id="theme-toggle" class="absolute top-4 right-4 text-white bg-white bg-opacity-20 rounded-full p-2 hover:bg-opacity-30 transition-all">
                <i class="fas fa-moon"></i>
            </button>
        </div>
        
        <!-- Game Area -->
        <div class="p-6 md:p-8">
            <!-- Power-ups Section -->
            <div class="mb-6">
                <div class="flex justify-between items-center mb-2">
                    <h3 class="text-sm font-semibold text-gray-600">Power-ups</h3>
                    <span id="power-count" class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full">3 available</span>
                </div>
                <div class="flex space-x-2">
                    <button id="lightning-power" class="power-up flex-1 bg-gradient-to-r from-yellow-400 to-yellow-600 text-white p-2 rounded-lg text-center hover:opacity-90 transition-all disabled:opacity-50" data-power="lightning">
                        <i class="fas fa-bolt"></i>
                        <span class="text-xs block">Lightning</span>
                    </button>
                    <button id="fire-power" class="power-up flex-1 bg-gradient-to-r from-red-400 to-red-600 text-white p-2 rounded-lg text-center hover:opacity-90 transition-all disabled:opacity-50" data-power="fire">
                        <i class="fas fa-fire"></i>
                        <span class="text-xs block">Fire</span>
                    </button>
                    <button id="ice-power" class="power-up flex-1 bg-gradient-to-r from-blue-400 to-blue-600 text-white p-2 rounded-lg text-center hover:opacity-90 transition-all disabled:opacity-50" data-power="ice">
                        <i class="fas fa-snowflake"></i>
                        <span class="text-xs block">Ice</span>
                    </button>
                    <button id="earth-power" class="power-up flex-1 bg-gradient-to-r from-green-400 to-green-600 text-white p-2 rounded-lg text-center hover:opacity-90 transition-all disabled:opacity-50" data-power="earth">
                        <i class="fas fa-mountain"></i>
                        <span class="text-xs block">Earth</span>
                    </button>
                </div>
            </div>
            
            <!-- Score Board -->
            <div class="flex justify-between items-center mb-8">
                <div class="text-center bg-blue-50 rounded-lg p-4 shadow-inner relative">
                    <h3 class="text-blue-800 font-semibold">YOU</h3>
                    <div id="user-score" class="text-3xl font-bold text-blue-600">0</div>
                    <div id="user-streak" class="text-xs mt-1 text-blue-500"></div>
                    <div id="user-power-bar" class="mt-2 h-2 bg-gray-200 rounded-full overflow-hidden">
                        <div class="power-bar h-full bg-blue-500" style="width: 0%"></div>
                    </div>
                </div>
                <div class="text-center">
                    <div class="text-gray-500 text-sm">VS</div>
                    <div id="game-mode" class="text-xs text-gray-500 mt-1">First to 5 wins</div>
                    <div id="round-counter" class="text-xs text-gray-500 mt-1 hidden">Round 1/5</div>
                </div>
                <div class="text-center bg-red-50 rounded-lg p-4 shadow-inner relative">
                    <h3 class="text-red-800 font-semibold">COMPUTER</h3>
                    <div id="computer-score" class="text-3xl font-bold text-red-600">0</div>
                    <div id="computer-streak" class="text-xs mt-1 text-red-500"></div>
                    <div id="computer-power-bar" class="mt-2 h-2 bg-gray-200 rounded-full overflow-hidden">
                        <div class="power-bar h-full bg-red-500" style="width: 0%"></div>
                    </div>
                </div>
            </div>
            
            <!-- Choices Display -->
            <div class="flex justify-between mb-10">
                <div class="text-center w-1/2">
                    <div id="user-choice" class="text-6xl mb-2 h-20 flex items-center justify-center">
                        <i class="far fa-hand-peace text-gray-300"></i>
                    </div>
                    <div class="text-sm text-gray-600">Your choice</div>
                    <div id="user-power-effect" class="text-xs mt-1 h-4"></div>
                </div>
                <div class="text-center w-1/2">
                    <div id="computer-choice" class="text-6xl mb-2 h-20 flex items-center justify-center">
                        <i class="fas fa-laptop-code text-gray-300"></i>
                    </div>
                    <div class="text-sm text-gray-600">Computer's choice</div>
                    <div id="computer-power-effect" class="text-xs mt-1 h-4"></div>
                </div>
            </div>
            
            <!-- Result Display -->
            <div id="result" class="text-center mb-8 min-h-12">
                <div class="text-xl font-semibold text-gray-500">Make your move to start!</div>
            </div>
            
            <!-- Game Controls -->
            <div class="flex justify-center space-x-4 md:space-x-8 mb-6">
                <button id="rock" class="choice-btn bg-gradient-to-br from-gray-400 to-gray-600 text-white w-16 h-16 md:w-20 md:h-20 rounded-full flex items-center justify-center text-3xl shadow-lg hover:shadow-xl transition-all duration-300">
                    <i class="fas fa-hand-rock"></i>
                </button>
                <button id="paper" class="choice-btn bg-gradient-to-br from-blue-400 to-blue-600 text-white w-16 h-16 md:w-20 md:h-20 rounded-full flex items-center justify-center text-3xl shadow-lg hover:shadow-xl transition-all duration-300">
                    <i class="fas fa-hand-paper"></i>
                </button>
                <button id="scissors" class="choice-btn bg-gradient-to-br from-red-400 to-red-600 text-white w-16 h-16 md:w-20 md:h-20 rounded-full flex items-center justify-center text-3xl shadow-lg hover:shadow-xl transition-all duration-300">
                    <i class="fas fa-hand-scissors"></i>
                </button>
            </div>
            
            <!-- Special Moves -->
            <div class="mt-4 mb-6">
                <h3 class="text-sm font-semibold text-gray-600 mb-2">Special Moves</h3>
                <div class="flex justify-center space-x-2">
                    <button id="well-move" class="special-move bg-gradient-to-r from-indigo-500 to-purple-500 text-white px-3 py-1 rounded-full text-xs font-medium hover:opacity-90 transition-all disabled:opacity-50">
                        <i class="fas fa-water"></i> Well
                    </button>
                    <button id="dynamite-move" class="special-move bg-gradient-to-r from-orange-500 to-red-500 text-white px-3 py-1 rounded-full text-xs font-medium hover:opacity-90 transition-all disabled:opacity-50">
                        <i class="fas fa-bomb"></i> Dynamite
                    </button>
                    <button id="nuke-move" class="special-move bg-gradient-to-r from-red-500 to-pink-500 text-white px-3 py-1 rounded-full text-xs font-medium hover:opacity-90 transition-all disabled:opacity-50">
                        <i class="fas fa-radiation"></i> Nuke
                    </button>
                </div>
            </div>
            
            <!-- Game History -->
            <div class="mt-8 bg-gray-50 rounded-lg p-4 max-h-32 overflow-y-auto">
                <h4 class="text-sm font-semibold text-gray-600 mb-2">Game History</h4>
                <div id="game-history" class="text-xs space-y-1">
                    <div class="text-gray-500 text-center">No games played yet</div>
                </div>
            </div>
            
            <!-- Game Info -->
            <div class="text-center text-sm text-gray-500 mt-4">
                <p id="game-info">First to 5 points wins the game!</p>
            </div>
        </div>
        
        <!-- Footer -->
        <div class="bg-gray-50 p-4 text-center text-gray-500 text-sm flex justify-between items-center">
            <p>Made with <i class="fas fa-heart text-red-400 heartbeat"></i> for fun</p>
            <div class="flex space-x-2">
                <button id="sound-toggle" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-volume-up"></i>
                </button>
                <button id="reset-stats" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-redo"></i>
                </button>
                <button id="achievements-btn" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-trophy"></i>
                </button>
            </div>
        </div>
    </div>
    
    <!-- Game Over Modal -->
    <div id="game-over-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
        <div class="bg-white rounded-xl p-8 max-w-sm w-full mx-4 text-center shadow-2xl transform transition-all fade-in">
            <h2 id="game-result" class="text-3xl font-bold mb-4"></h2>
            <p id="final-score" class="text-xl mb-6"></p>
            <div id="game-stats" class="text-sm text-gray-600 mb-6"></div>
            <div id="rewards" class="mb-6"></div>
            <div class="flex justify-center space-x-3">
                <button id="play-again" class="bg-gradient-to-r from-purple-500 to-blue-500 text-white px-6 py-3 rounded-full font-semibold shadow-lg hover:shadow-xl transition-all">
                    Play Again
                </button>
                <button id="share-result" class="bg-gray-200 text-gray-700 px-6 py-3 rounded-full font-semibold shadow hover:bg-gray-300 transition-all">
                    Share
                </button>
            </div>
        </div>
    </div>
    
    <!-- Achievements Modal -->
    <div id="achievements-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
        <div class="bg-white rounded-xl p-6 max-w-md w-full mx-4 shadow-2xl transform transition-all fade-in">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-2xl font-bold">Achievements</h2>
                <button id="close-achievements" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div id="achievements-list" class="grid grid-cols-2 gap-4 max-h-96 overflow-y-auto">
                <!-- Achievements will be populated here -->
            </div>
        </div>
    </div>
    
    <!-- Confetti container -->
    <div id="confetti-container" class="fixed inset-0 pointer-events-none z-40"></div>
    
    <!-- Achievement notification -->
    <div id="achievement-notification" class="achievement">
        <div class="w-12 h-12 rounded-full bg-yellow-100 flex items-center justify-center mr-3">
            <i class="fas fa-trophy text-yellow-500 text-xl"></i>
        </div>
        <div>
            <div class="font-bold">Achievement Unlocked!</div>
            <div id="achievement-name" class="text-sm text-gray-600"></div>
        </div>
    </div>
    
    <script>
        // Game variables
        let userScore = 0;
        let computerScore = 0;
        let userStreak = 0;
        let computerStreak = 0;
        let gameMode = 'classic'; // classic, best-of, endless, battle
        let soundEnabled = true;
        let gameHistory = [];
        let totalGames = 0;
        let totalWins = 0;
        let currentRound = 1;
        let userPower = 0;
        let computerPower = 0;
        let availablePowerUps = 3;
        let activePowerUp = null;
        let specialMovesUsed = {
            well: 0,
            dynamite: 0,
            nuke: 0
        };
        let achievements = {
            firstWin: { name: "First Victory", description: "Win your first game", unlocked: false },
            streak3: { name: "On Fire", description: "Get a 3 game winning streak", unlocked: false },
            streak5: { name: "Unstoppable", description: "Get a 5 game winning streak", unlocked: false },
            perfectGame: { name: "Perfect Game", description: "Win without losing a round", unlocked: false },
            powerUser: { name: "Power User", description: "Use all power-ups in a single game", unlocked: false },
            specialMoves: { name: "Specialist", description: "Use all special moves", unlocked: false },
            comeback: { name: "Comeback Kid", description: "Win after being down 0-2", unlocked: false },
            veteran: { name: "Veteran", description: "Play 50 games", unlocked: false },
            master: { name: "Rock Paper Scissors Master", description: "Win 25 games", unlocked: false },
            battlemode: { name: "Battle Master", description: "Win a battle mode game", unlocked: false }
        };
        
        // DOM elements
        const userScoreSpan = document.getElementById('user-score');
        const computerScoreSpan = document.getElementById('computer-score');
        const userStreakSpan = document.getElementById('user-streak');
        const computerStreakSpan = document.getElementById('computer-streak');
        const resultDiv = document.getElementById('result');
        const userChoiceDiv = document.getElementById('user-choice');
        const computerChoiceDiv = document.getElementById('computer-choice');
        const gameOverModal = document.getElementById('game-over-modal');
        const gameResult = document.getElementById('game-result');
        const finalScore = document.getElementById('final-score');
        const gameStats = document.getElementById('game-stats');
        const rewards = document.getElementById('rewards');
        const gameHistoryDiv = document.getElementById('game-history');
        const gameInfo = document.getElementById('game-info');
        const gameModeDiv = document.getElementById('game-mode');
        const roundCounter = document.getElementById('round-counter');
        const soundToggle = document.getElementById('sound-toggle');
        const resetStats = document.getElementById('reset-stats');
        const shareResult = document.getElementById('share-result');
        const confettiContainer = document.getElementById('confetti-container');
        const themeToggle = document.getElementById('theme-toggle');
        const powerCount = document.getElementById('power-count');
        const userPowerBar = document.querySelector('#user-power-bar .power-bar');
        const computerPowerBar = document.querySelector('#computer-power-bar .power-bar');
        const userPowerEffect = document.getElementById('user-power-effect');
        const computerPowerEffect = document.getElementById('computer-power-effect');
        const achievementsBtn = document.getElementById('achievements-btn');
        const achievementsModal = document.getElementById('achievements-modal');
        const closeAchievements = document.getElementById('close-achievements');
        const achievementsList = document.getElementById('achievements-list');
        const achievementNotification = document.getElementById('achievement-notification');
        const achievementName = document.getElementById('achievement-name');
        
        // Choice icons mapping
        const choices = {
            rock: '<i class="fas fa-hand-rock"></i>',
            paper: '<i class="fas fa-hand-paper"></i>',
            scissors: '<i class="fas fa-hand-scissors"></i>',
            well: '<i class="fas fa-water"></i>',
            dynamite: '<i class="fas fa-bomb"></i>',
            nuke: '<i class="fas fa-radiation"></i>'
        };
        
        // Power-up effects
        const powerUpEffects = {
            lightning: { icon: '<i class="fas fa-bolt lightning"></i>', class: 'lightning' },
            fire: { icon: '<i class="fas fa-fire fire-effect"></i>', class: 'fire-effect' },
            ice: { icon: '<i class="fas fa-snowflake ice-effect"></i>', class: 'ice-effect' },
            earth: { icon: '<i class="fas fa-mountain earth-effect"></i>', class: 'earth-effect' }
        };
        
        // Event listeners for buttons
        document.getElementById('rock').addEventListener('click', () => game('rock'));
        document.getElementById('paper').addEventListener('click', () => game('paper'));
        document.getElementById('scissors').addEventListener('click', () => game('scissors'));
        document.getElementById('well-move').addEventListener('click', () => game('well'));
        document.getElementById('dynamite-move').addEventListener('click', () => game('dynamite'));
        document.getElementById('nuke-move').addEventListener('click', () => game('nuke'));
        document.getElementById('play-again').addEventListener('click', resetGame);
        document.getElementById('classic-mode').addEventListener('click', () => setGameMode('classic'));
        document.getElementById('best-of-mode').addEventListener('click', () => setGameMode('best-of'));
        document.getElementById('endless-mode').addEventListener('click', () => setGameMode('endless'));
        document.getElementById('battle-mode').addEventListener('click', () => setGameMode('battle'));
        soundToggle.addEventListener('click', toggleSound);
        resetStats.addEventListener('click', resetAllStats);
        shareResult.addEventListener('click', shareGameResult);
        themeToggle.addEventListener('click', toggleTheme);
        achievementsBtn.addEventListener('click', showAchievements);
        closeAchievements.addEventListener('click', hideAchievements);
        
        // Power-up event listeners
        document.querySelectorAll('.power-up').forEach(button => {
            button.addEventListener('click', () => activatePowerUp(button.dataset.power));
        });
        
        // Initialize game mode
        setGameMode('classic');
        loadGameData();
        updateAchievementsList();
        
        // Set game mode
        function setGameMode(mode) {
            gameMode = mode;
            
            // Update UI for selected mode
            document.querySelectorAll('[id$="-mode"]').forEach(btn => {
                btn.classList.remove('bg-white', 'bg-opacity-40');
                btn.classList.add('bg-white', 'bg-opacity-20');
            });
            
            document.getElementById(`${mode}-mode`).classList.remove('bg-opacity-20');
            document.getElementById(`${mode}-mode`).classList.add('bg-opacity-40');
            
            // Update game info
            switch(mode) {
                case 'classic':
                    gameInfo.textContent = 'First to 5 points wins the game!';
                    gameModeDiv.textContent = 'First to 5 wins';
                    roundCounter.classList.add('hidden');
                    break;
                case 'best-of':
                    gameInfo.textContent = 'Best of 5 rounds! Win 3 rounds to win the game.';
                    gameModeDiv.textContent = 'Best of 5';
                    roundCounter.classList.remove('hidden');
                    roundCounter.textContent = 'Round 1/5';
                    break;
                case 'endless':
                    gameInfo.textContent = 'Endless mode! Play as long as you want.';
                    gameModeDiv.textContent = 'Endless';
                    roundCounter.classList.add('hidden');
                    break;
                case 'battle':
                    gameInfo.textContent = 'Battle mode! Use power-ups to defeat your opponent!';
                    gameModeDiv.textContent = 'Battle';
                    roundCounter.classList.add('hidden');
                    break;
            }
            
            resetGame();
        }
        
        // Toggle sound
        function toggleSound() {
            soundEnabled = !soundEnabled;
            soundToggle.innerHTML = soundEnabled ? 
                '<i class="fas fa-volume-up"></i>' : 
                '<i class="fas fa-volume-mute"></i>';
        }
        
        // Toggle theme
        function toggleTheme() {
            document.body.classList.toggle('dark-mode');
            const isDarkMode = document.body.classList.contains('dark-mode');
            themeToggle.innerHTML = isDarkMode ? 
                '<i class="fas fa-sun"></i>' : 
                '<i class="fas fa-moon"></i>';
            
            // Save theme preference
            localStorage.setItem('theme', isDarkMode ? 'dark' : 'light');
        }
        
        // Play sound effect
        function playSound(type) {
            if (!soundEnabled) return;
            
            // In a real implementation, you would play actual sound files here
            // For this example, we'll just log to console
            console.log(`Playing sound: ${type}`);
        }
        
        // Activate power-up
        function activatePowerUp(power) {
            if (availablePowerUps <= 0) return;
            
            activePowerUp = power;
            availablePowerUps--;
            powerCount.textContent = `${availablePowerUps} available`;
            
            // Disable the used power-up button
            document.querySelector(`[data-power="${power}"]`).disabled = true;
            
            // Show power-up activation
            userPowerEffect.innerHTML = powerUpEffects[power].icon;
            userPowerEffect.className = `text-xs mt-1 h-4 ${powerUpEffects[power].class}`;
            
            playSound('powerup');
        }
        
        // Main game function
        function game(userChoice) {
            // Check if it's a special move and if it's available
            if (['well', 'dynamite', 'nuke'].includes(userChoice)) {
                if (specialMovesUsed[userChoice] >= 1) {
                    resultDiv.innerHTML = '<div class="result-text text-xl font-semibold text-yellow-500">Special move already used this game!</div>';
                    return;
                }
                specialMovesUsed[userChoice]++;
                
                // Disable the special move button
                document.getElementById(`${userChoice}-move`).disabled = true;
            }
            
            // Show user choice with animation
            userChoiceDiv.innerHTML = choices[userChoice];
            userChoiceDiv.classList.add('bounce');
            
            // Computer makes random choice after slight delay
            setTimeout(() => {
                const computerChoice = getComputerChoice();
                computerChoiceDiv.innerHTML = choices[computerChoice];
                computerChoiceDiv.classList.add('shake');
                
                // Determine winner after animations complete
                setTimeout(() => {
                    userChoiceDiv.classList.remove('bounce');
                    computerChoiceDiv.classList.remove('shake');
                    const result = determineWinner(userChoice, computerChoice);
                    displayResult(result, userChoice, computerChoice);
                    addToHistory(userChoice, computerChoice, result);
                    checkGameOver();
                    
                    // Clear power-up effects
                    if (activePowerUp) {
                        setTimeout(() => {
                            userPowerEffect.innerHTML = '';
                            computerPowerEffect.innerHTML = '';
                            activePowerUp = null;
                        }, 2000);
                    }
                }, 500);
            }, 300);
        }
        
        // Computer makes random choice
        function getComputerChoice() {
            // In battle mode, computer has a chance to use a power-up
            if (gameMode === 'battle' && Math.random() < 0.3) {
                const powerUps = ['lightning', 'fire', 'ice', 'earth'];
                const randomPower = powerUps[Math.floor(Math.random() * powerUps.length)];
                
                // Show computer power-up
                computerPowerEffect.innerHTML = powerUpEffects[randomPower].icon;
                computerPowerEffect.className = `text-xs mt-1 h-4 ${powerUpEffects[randomPower].class}`;
                
                // Power-up affects computer's choice
                if (randomPower === 'lightning' && Math.random() < 0.7) {
                    // Lightning power-up: 70% chance to counter player's likely choice
                    return getCounterChoice();
                }
            }
            
            const choices = ['rock', 'paper', 'scissors'];
            const randomNumber = Math.floor(Math.random() * 3);
            return choices[randomNumber];
        }
        
        // Get counter choice based on player's patterns
        function getCounterChoice() {
            // Simple pattern recognition - in a real game, this would be more sophisticated
            if (gameHistory.length >= 3) {
                const recentChoices = gameHistory.slice(0, 3).map(item => item.userChoice);
                const mostFrequent = recentChoices.sort((a,b) =>
                    recentChoices.filter(v => v === a).length - recentChoices.filter(v => v === b).length
                ).pop();
                
                // Return the choice that beats the player's most frequent choice
                switch(mostFrequent) {
                    case 'rock': return 'paper';
                    case 'paper': return 'scissors';
                    case 'scissors': return 'rock';
                }
            }
            
            // Fallback to random choice
            const choices = ['rock', 'paper', 'scissors'];
            return choices[Math.floor(Math.random() * 3)];
        }
        
        // Determine the winner
        function determineWinner(user, computer) {
            // Power-up effects
            let userBonus = 0;
            let computerBonus = 0;
            
            if (activePowerUp) {
                switch(activePowerUp) {
                    case 'lightning':
                        // Lightning: 50% chance to win regardless of choice
                        if (Math.random() < 0.5) {
                            userBonus = 1;
                        }
                        break;
                    case 'fire':
                        // Fire: Beats rock and scissors
                        if (computer === 'rock' || computer === 'scissors') {
                            userBonus = 1;
                        }
                        break;
                    case 'ice':
                        // Ice: Beats paper and scissors
                        if (computer === 'paper' || computer === 'scissors') {
                            userBonus = 1;
                        }
                        break;
                    case 'earth':
                        // Earth: Beats rock and paper
                        if (computer === 'rock' || computer === 'paper') {
                            userBonus = 1;
                        }
                        break;
                }
            }
            
            // Special moves logic
            if (user === 'well') {
                // Well beats rock and scissors
                if (computer === 'rock' || computer === 'scissors') {
                    userScore++;
                    userScoreSpan.textContent = userScore;
                    userStreak++;
                    computerStreak = 0;
                    updateStreakDisplay();
                    updatePowerBars();
                    playSound('win');
                    return 'win';
                } else if (computer === 'paper') {
                    // Paper covers well
                    computerScore++;
                    computerScoreSpan.textContent = computerScore;
                    computerStreak++;
                    userStreak = 0;
                    updateStreakDisplay();
                    updatePowerBars();
                    playSound('lose');
                    return 'lose';
                }
            } else if (user === 'dynamite') {
                // Dynamite beats everything except well
                if (computer !== 'well') {
                    userScore++;
                    userScoreSpan.textContent = userScore;
                    userStreak++;
                    computerStreak = 0;
                    updateStreakDisplay();
                    updatePowerBars();
                    playSound('win');
                    return 'win';
                } else {
                    // Well contains dynamite
                    computerScore++;
                    computerScoreSpan.textContent = computerScore;
                    computerStreak++;
                    userStreak = 0;
                    updateStreakDisplay();
                    updatePowerBars();
                    playSound('lose');
                    return 'lose';
                }
            } else if (user === 'nuke') {
                // Nuke beats everything (can only be used once per game)
                userScore++;
                userScoreSpan.textContent = userScore;
                userStreak++;
                computerStreak = 0;
                updateStreakDisplay();
                updatePowerBars();
                playSound('win');
                return 'win';
            } else if (computer === 'well') {
                // Well beats rock and scissors
                if (user === 'rock' || user === 'scissors') {
                    computerScore++;
                    computerScoreSpan.textContent = computerScore;
                    computerStreak++;
                    userStreak = 0;
                    updateStreakDisplay();
                    updatePowerBars();
                    playSound('lose');
                    return 'lose';
                } else if (user === 'paper') {
                    // Paper covers well
                    userScore++;
                    userScoreSpan.textContent = userScore;
                    userStreak++;
                    computerStreak = 0;
                    updateStreakDisplay();
                    updatePowerBars();
                    playSound('win');
                    return 'win';
                }
            } else if (computer === 'dynamite') {
                // Dynamite beats everything except well
                if (user !== 'well') {
                    computerScore++;
                    computerScoreSpan.textContent = computerScore;
                    computerStreak++;
                    userStreak = 0;
                    updateStreakDisplay();
                    updatePowerBars();
                    playSound('lose');
                    return 'lose';
                } else {
                    // Well contains dynamite
                    userScore++;
                    userScoreSpan.textContent = userScore;
                    userStreak++;
                    computerStreak = 0;
                    updateStreakDisplay();
                    updatePowerBars();
                    playSound('win');
                    return 'win';
                }
            } else if (computer === 'nuke') {
                // Nuke beats everything (can only be used once per game)
                computerScore++;
                computerScoreSpan.textContent = computerScore;
                computerStreak++;
                userStreak = 0;
                updateStreakDisplay();
                updatePowerBars();
                playSound('lose');
                return 'lose';
            }
            
            // Regular rock-paper-scissors logic
            if (user === computer) {
                return 'draw';
            }
            
            if ((user === 'rock' && computer === 'scissors') ||
                (user === 'paper' && computer === 'rock') ||
                (user === 'scissors' && computer === 'paper')) {
                userScore++;
                userScoreSpan.textContent = userScore;
                userStreak++;
                computerStreak = 0;
                updateStreakDisplay();
                updatePowerBars();
                playSound('win');
                return 'win';
            } else {
                computerScore++;
                computerScoreSpan.textContent = computerScore;
                computerStreak++;
                userStreak = 0;
                updateStreakDisplay();
                updatePowerBars();
                playSound('lose');
                return 'lose';
            }
        }
        
        // Update power bars
        function updatePowerBars() {
            // Update user power bar
            userPower = Math.min(userPower + (userStreak > 0 ? 10 : 5), 100);
            userPowerBar.style.width = `${userPower}%`;
            
            // Update computer power bar
            computerPower = Math.min(computerPower + (computerStreak > 0 ? 10 : 5), 100);
            computerPowerBar.style.width = `${computerPower}%`;
            
            // Grant power-ups based on power level
            if (userPower >= 100 && availablePowerUps < 3) {
                availablePowerUps++;
                powerCount.textContent = `${availablePowerUps} available`;
                userPower = 0;
                userPowerBar.style.width = '0%';
                
                // Re-enable power-up buttons
                document.querySelectorAll('.power-up').forEach(button => {
                    if (button.disabled) {
                        button.disabled = false;
                    }
                });
                
                playSound('powerup-granted');
            }
        }
        
        // Update streak display
        function updateStreakDisplay() {
            userStreakSpan.textContent = userStreak > 1 ? `${userStreak} wins 🔥` : '';
            computerStreakSpan.textContent = computerStreak > 1 ? `${computerStreak} wins 🔥` : '';
            
            // Check for streak achievements
            if (userStreak === 3 && !achievements.streak3.unlocked) {
                unlockAchievement('streak3');
            } else if (userStreak === 5 && !achievements.streak5.unlocked) {
                unlockAchievement('streak5');
            }
        }
        
        // Display the result with appropriate styling
        function displayResult(result, userChoice, computerChoice) {
            let resultText = '';
            let resultClass = '';
            
            switch(result) {
                case 'win':
                    resultText = `You win! ${capitalizeFirstLetter(userChoice)} beats ${computerChoice}`;
                    resultClass = 'text-green-500 pulse';
                    break;
                case 'lose':
                    resultText = `You lose! ${capitalizeFirstLetter(computerChoice)} beats ${userChoice}`;
                    resultClass = 'text-red-500 pulse';
                    break;
                case 'draw':
                    resultText = "It's a draw!";
                    resultClass = 'text-yellow-500 pulse';
                    break;
            }
            
            resultDiv.innerHTML = `<div class="result-text text-xl font-semibold ${resultClass}">${resultText}</div>`;
            
            // Remove pulse animation after 1.5 seconds
            setTimeout(() => {
                const resultTextElement = resultDiv.querySelector('.result-text');
                if (resultTextElement) {
                    resultTextElement.classList.remove('pulse');
                }
            }, 1500);
        }
        
        // Add game to history
        function addToHistory(userChoice, computerChoice, result) {
            totalGames++;
            if (result === 'win') totalWins++;
            
            const historyItem = {
                userChoice,
                computerChoice,
                result,
                timestamp: new Date().toLocaleTimeString()
            };
            
            gameHistory.unshift(historyItem);
            if (gameHistory.length > 10) gameHistory.pop();
            
            updateHistoryDisplay();
            
            // Save game data
            saveGameData();
            
            // Check for achievements
            checkAchievements();
        }
        
        // Update history display
        function updateHistoryDisplay() {
            if (gameHistory.length === 0) {
                gameHistoryDiv.innerHTML = '<div class="text-gray-500 text-center">No games played yet</div>';
                return;
            }
            
            gameHistoryDiv.innerHTML = gameHistory.map(item => {
                const resultIcon = item.result === 'win' ? 
                    '<i class="fas fa-check-circle text-green-500"></i>' : 
                    item.result === 'lose' ? 
                    '<i class="fas fa-times-circle text-red-500"></i>' : 
                    '<i class="fas fa-minus-circle text-yellow-500"></i>';
                
                return `
                    <div class="history-item flex justify-between items-center p-1 rounded hover:bg-gray-100">
                        <span>${item.timestamp}</span>
                        <span>${choices[item.userChoice]} vs ${choices[item.computerChoice]}</span>
                        <span>${resultIcon}</span>
                    </div>
                `;
            }).join('');
        }
        
        // Check if game is over
        function checkGameOver() {
            let gameOver = false;
            
            switch(gameMode) {
                case 'classic':
                    gameOver = userScore === 5 || computerScore === 5;
                    break;
                case 'best-of':
                    gameOver = userScore === 3 || computerScore === 3;
                    break;
                case 'endless':
                    // Never game over in endless mode
                    return;
                case 'battle':
                    gameOver = userScore === 10 || computerScore === 10;
                    break;
            }
            
            if (gameOver) {
                showGameOverModal();
                
                if (userScore > computerScore) {
                    createConfetti();
                    playSound('victory');
                    
                    // Check for perfect game achievement
                    if (computerScore === 0 && !achievements.perfectGame.unlocked) {
                        unlockAchievement('perfectGame');
                    }
                    
                    // Check for battle mode achievement
                    if (gameMode === 'battle' && !achievements.battlemode.unlocked) {
                        unlockAchievement('battlemode');
                    }
                    
                    // Check for comeback achievement
                    if (userScore >= 3 && computerScore >= 2 && !achievements.comeback.unlocked) {
                        unlockAchievement('comeback');
                    }
                } else {
                    playSound('defeat');
                }
                
                // Check for first win achievement
                if (totalWins === 1 && !achievements.firstWin.unlocked) {
                    unlockAchievement('firstWin');
                }
            }
        }
        
        // Show game over modal
        function showGameOverModal() {
            gameOverModal.classList.remove('hidden');
            
            if (userScore > computerScore) {
                gameResult.textContent = "You Won!";
                gameResult.className = "text-3xl font-bold mb-4 text-green-500";
            } else {
                gameResult.textContent = "Computer Won!";
                gameResult.className = "text-3xl font-bold mb-4 text-red-500";
            }
            
            finalScore.textContent = `Final Score: ${userScore} - ${computerScore}`;
            
            // Calculate win rate
            const winRate = totalGames > 0 ? Math.round((totalWins / totalGames) * 100) : 0;
            gameStats.innerHTML = `
                <div>Games played: ${totalGames}</div>
                <div>Win rate: ${winRate}%</div>
                <div>Best streak: ${Math.max(userStreak, computerStreak)}</div>
            `;
            
            // Show rewards
            if (userScore > computerScore) {
                const coinsEarned = userScore * 10;
                rewards.innerHTML = `
                    <div class="bg-yellow-50 rounded-lg p-3">
                        <div class="flex items-center justify-center">
                            <i class="fas fa-coins text-yellow-500 mr-2"></i>
                            <span class="font-semibold">You earned ${coinsEarned} coins!</span>
                        </div>
                    </div>
                `;
            } else {
                rewards.innerHTML = '';
            }
        }
        
        // Create confetti effect
        function createConfetti() {
            const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#00ffff'];
            
            for (let i = 0; i < 100; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = `${Math.random() * 100}%`;
                    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.width = `${Math.random() * 10 + 5}px`;
                    confetti.style.height = confetti.style.width;
                    confetti.style.opacity = Math.random() * 0.5 + 0.5;
                    
                    confettiContainer.appendChild(confetti);
                    
                    // Remove confetti after animation completes
                    setTimeout(() => {
                        confetti.remove();
                    }, 3000);
                }, i * 30);
            }
        }
        
        // Share game result
        function shareGameResult() {
            const text = `I just played Rock Paper Scissors Ultimate and ${userScore > computerScore ? 'won' : 'lost'} with a score of ${userScore}-${computerScore}!`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'Rock Paper Scissors Ultimate',
                    text: text,
                });
            } else {
                // Fallback: copy to clipboard
                navigator.clipboard.writeText(text).then(() => {
                    alert('Result copied to clipboard!');
                });
            }
        }
        
        // Reset the game
        function resetGame() {
            userScore = 0;
            computerScore = 0;
            userStreak = 0;
            computerStreak = 0;
            userPower = 0;
            computerPower = 0;
            currentRound = 1;
            availablePowerUps = 3;
            activePowerUp = null;
            specialMovesUsed = {
                well: 0,
                dynamite: 0,
                nuke: 0
            };
            
            userScoreSpan.textContent = '0';
            computerScoreSpan.textContent = '0';
            userStreakSpan.textContent = '';
            computerStreakSpan.textContent = '';
            resultDiv.innerHTML = '<div class="text-xl font-semibold text-gray-500">Make your move to start!</div>';
            userChoiceDiv.innerHTML = '<i class="far fa-hand-peace text-gray-300"></i>';
            computerChoiceDiv.innerHTML = '<i class="fas fa-laptop-code text-gray-300"></i>';
            userPowerBar.style.width = '0%';
            computerPowerBar.style.width = '0%';
            userPowerEffect.innerHTML = '';
            computerPowerEffect.innerHTML = '';
            powerCount.textContent = '3 available';
            gameOverModal.classList.add('hidden');
            
            // Update round counter for best-of mode
            if (gameMode === 'best-of') {
                roundCounter.textContent = 'Round 1/5';
            }
            
            // Enable special moves
            document.querySelectorAll('.special-move').forEach(button => {
                button.disabled = false;
            });
            
            // Enable power-ups
            document.querySelectorAll('.power-up').forEach(button => {
                button.disabled = false;
            });
        }
        
        // Reset all stats
        function resetAllStats() {
            if (confirm('Are you sure you want to reset all statistics?')) {
                totalGames = 0;
                totalWins = 0;
                gameHistory = [];
                updateHistoryDisplay();
                resetGame();
                
                // Reset achievements
                Object.keys(achievements).forEach(key => {
                    achievements[key].unlocked = false;
                });
                updateAchievementsList();
                saveGameData();
            }
        }
        
        // Check achievements
        function checkAchievements() {
            // Check for master achievement
            if (totalWins >= 25 && !achievements.master.unlocked) {
                unlockAchievement('master');
            }
            
            // Check for veteran achievement
            if (totalGames >= 50 && !achievements.veteran.unlocked) {
                unlockAchievement('veteran');
            }
            
            // Check for power user achievement
            const powerUpsUsed = document.querySelectorAll('.power-up:disabled').length;
            if (powerUpsUsed >= 4 && !achievements.powerUser.unlocked) {
                unlockAchievement('powerUser');
            }
            
            // Check for special moves achievement
            const specialMovesCount = Object.values(specialMovesUsed).filter(count => count > 0).length;
            if (specialMovesCount >= 3 && !achievements.specialMoves.unlocked) {
                unlockAchievement('specialMoves');
            }
        }
        
        // Unlock achievement
        function unlockAchievement(achievementKey) {
            achievements[achievementKey].unlocked = true;
            updateAchievementsList();
            saveGameData();
            
            // Show achievement notification
            achievementName.textContent = achievements[achievementKey].name;
            achievementNotification.classList.add('show');
            
            playSound('achievement');
            
            // Hide notification after 5 seconds
            setTimeout(() => {
                achievementNotification.classList.remove('show');
            }, 5000);
        }
        
        // Update achievements list
        function updateAchievementsList() {
            achievementsList.innerHTML = '';
            
            Object.keys(achievements).forEach(key => {
                const achievement = achievements[key];
                const achievementElement = document.createElement('div');
                achievementElement.className = `bg-gray-50 rounded-lg p-3 flex items-center ${achievement.unlocked ? '' : 'opacity-50'}`;
                
                achievementElement.innerHTML = `
                    <div class="w-10 h-10 rounded-full ${achievement.unlocked ? 'bg-yellow-100' : 'bg-gray-200'} flex items-center justify-center mr-3">
                        <i class="fas ${achievement.unlocked ? 'fa-trophy text-yellow-500' : 'fa-lock text-gray-500'}"></i>
                    </div>
                    <div>
                        <div class="font-semibold">${achievement.name}</div>
                        <div class="text-xs text-gray-600">${achievement.description}</div>
                    </div>
                `;
                
                achievementsList.appendChild(achievementElement);
            });
        }
        
        // Show achievements modal
        function showAchievements() {
            achievementsModal.classList.remove('hidden');
        }
        
        // Hide achievements modal
        function hideAchievements() {
            achievementsModal.classList.add('hidden');
        }
        
        // Save game data to localStorage
        function saveGameData() {
            const gameData = {
                totalGames,
                totalWins,
                achievements,
                gameHistory: gameHistory.slice(0, 20) // Save only last 20 games
            };
            
            localStorage.setItem('rpsGameData', JSON.stringify(gameData));
        }
        
        // Load game data from localStorage
        function loadGameData() {
            const savedData = localStorage.getItem('rpsGameData');
            
            if (savedData) {
                const gameData = JSON.parse(savedData);
                totalGames = gameData.totalGames || 0;
                totalWins = gameData.totalWins || 0;
                achievements = { ...achievements, ...gameData.achievements };
                gameHistory = gameData.gameHistory || [];
                updateHistoryDisplay();
            }
            
            // Load theme preference
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                document.body.classList.add('dark-mode');
                themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
            }
        }
        
        // Helper function to capitalize first letter
        function capitalizeFirstLetter(string) {
            return string.charAt(0).toUpperCase() + string.slice(1);
        }
    </script>
</body>
</html>